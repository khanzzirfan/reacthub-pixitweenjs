{"version":3,"file":"PixiGifGsapSync-10c2dc73.js","sources":["../../node_modules/lodash/_createBaseEach.js","../../node_modules/lodash/_baseEach.js","../../node_modules/lodash/_baseMap.js","../../node_modules/lodash/map.js","../../node_modules/js-binary-schema-parser/lib/index.js","../../node_modules/js-binary-schema-parser/lib/parsers/uint8.js","../../node_modules/js-binary-schema-parser/lib/schemas/gif.js","../../node_modules/gifuct-js/lib/deinterlace.js","../../node_modules/gifuct-js/lib/lzw.js","../../node_modules/gifuct-js/lib/index.js","../../node_modules/@react-gifs/tools/dist/index.esm.js","../../src/components/PixiAnimatedSprite/PixiAnimatedSprite.tsx","../../src/components/PixiGifSprite/PixiGifGsapSync.tsx"],"sourcesContent":["var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loop = exports.conditional = exports.parse = void 0;\n\nvar parse = function parse(stream, schema) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : result;\n\n  if (Array.isArray(schema)) {\n    schema.forEach(function (partSchema) {\n      return parse(stream, partSchema, result, parent);\n    });\n  } else if (typeof schema === 'function') {\n    schema(stream, result, parent, parse);\n  } else {\n    var key = Object.keys(schema)[0];\n\n    if (Array.isArray(schema[key])) {\n      parent[key] = {};\n      parse(stream, schema[key], result, parent[key]);\n    } else {\n      parent[key] = schema[key](stream, result, parent, parse);\n    }\n  }\n\n  return result;\n};\n\nexports.parse = parse;\n\nvar conditional = function conditional(schema, conditionFunc) {\n  return function (stream, result, parent, parse) {\n    if (conditionFunc(stream, result, parent)) {\n      parse(stream, schema, result, parent);\n    }\n  };\n};\n\nexports.conditional = conditional;\n\nvar loop = function loop(schema, continueFunc) {\n  return function (stream, result, parent, parse) {\n    var arr = [];\n    var lastStreamPos = stream.pos;\n\n    while (continueFunc(stream, result, parent)) {\n      var newParent = {};\n      parse(stream, schema, result, newParent); // cases when whole file is parsed but no termination is there and stream position is not getting updated as well\n      // it falls into infinite recursion, null check to avoid the same\n\n      if (stream.pos === lastStreamPos) {\n        break;\n      }\n\n      lastStreamPos = stream.pos;\n      arr.push(newParent);\n    }\n\n    return arr;\n  };\n};\n\nexports.loop = loop;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readBits = exports.readArray = exports.readUnsigned = exports.readString = exports.peekBytes = exports.readBytes = exports.peekByte = exports.readByte = exports.buildStream = void 0;\n\n// Default stream and parsers for Uint8TypedArray data type\nvar buildStream = function buildStream(uint8Data) {\n  return {\n    data: uint8Data,\n    pos: 0\n  };\n};\n\nexports.buildStream = buildStream;\n\nvar readByte = function readByte() {\n  return function (stream) {\n    return stream.data[stream.pos++];\n  };\n};\n\nexports.readByte = readByte;\n\nvar peekByte = function peekByte() {\n  var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return function (stream) {\n    return stream.data[stream.pos + offset];\n  };\n};\n\nexports.peekByte = peekByte;\n\nvar readBytes = function readBytes(length) {\n  return function (stream) {\n    return stream.data.subarray(stream.pos, stream.pos += length);\n  };\n};\n\nexports.readBytes = readBytes;\n\nvar peekBytes = function peekBytes(length) {\n  return function (stream) {\n    return stream.data.subarray(stream.pos, stream.pos + length);\n  };\n};\n\nexports.peekBytes = peekBytes;\n\nvar readString = function readString(length) {\n  return function (stream) {\n    return Array.from(readBytes(length)(stream)).map(function (value) {\n      return String.fromCharCode(value);\n    }).join('');\n  };\n};\n\nexports.readString = readString;\n\nvar readUnsigned = function readUnsigned(littleEndian) {\n  return function (stream) {\n    var bytes = readBytes(2)(stream);\n    return littleEndian ? (bytes[1] << 8) + bytes[0] : (bytes[0] << 8) + bytes[1];\n  };\n};\n\nexports.readUnsigned = readUnsigned;\n\nvar readArray = function readArray(byteSize, totalOrFunc) {\n  return function (stream, result, parent) {\n    var total = typeof totalOrFunc === 'function' ? totalOrFunc(stream, result, parent) : totalOrFunc;\n    var parser = readBytes(byteSize);\n    var arr = new Array(total);\n\n    for (var i = 0; i < total; i++) {\n      arr[i] = parser(stream);\n    }\n\n    return arr;\n  };\n};\n\nexports.readArray = readArray;\n\nvar subBitsTotal = function subBitsTotal(bits, startIndex, length) {\n  var result = 0;\n\n  for (var i = 0; i < length; i++) {\n    result += bits[startIndex + i] && Math.pow(2, length - i - 1);\n  }\n\n  return result;\n};\n\nvar readBits = function readBits(schema) {\n  return function (stream) {\n    var _byte = readByte()(stream); // convert the byte to bit array\n\n\n    var bits = new Array(8);\n\n    for (var i = 0; i < 8; i++) {\n      bits[7 - i] = !!(_byte & 1 << i);\n    } // convert the bit array to values based on the schema\n\n\n    return Object.keys(schema).reduce(function (res, key) {\n      var def = schema[key];\n\n      if (def.length) {\n        res[key] = subBitsTotal(bits, def.index, def.length);\n      } else {\n        res[key] = bits[def.index];\n      }\n\n      return res;\n    }, {});\n  };\n};\n\nexports.readBits = readBits;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _ = require(\"../\");\n\nvar _uint = require(\"../parsers/uint8\");\n\n// a set of 0x00 terminated subblocks\nvar subBlocksSchema = {\n  blocks: function blocks(stream) {\n    var terminator = 0x00;\n    var chunks = [];\n    var streamSize = stream.data.length;\n    var total = 0;\n\n    for (var size = (0, _uint.readByte)()(stream); size !== terminator; size = (0, _uint.readByte)()(stream)) {\n      // size becomes undefined for some case when file is corrupted and  terminator is not proper \n      // null check to avoid recursion\n      if (!size) break; // catch corrupted files with no terminator\n\n      if (stream.pos + size >= streamSize) {\n        var availableSize = streamSize - stream.pos;\n        chunks.push((0, _uint.readBytes)(availableSize)(stream));\n        total += availableSize;\n        break;\n      }\n\n      chunks.push((0, _uint.readBytes)(size)(stream));\n      total += size;\n    }\n\n    var result = new Uint8Array(total);\n    var offset = 0;\n\n    for (var i = 0; i < chunks.length; i++) {\n      result.set(chunks[i], offset);\n      offset += chunks[i].length;\n    }\n\n    return result;\n  }\n}; // global control extension\n\nvar gceSchema = (0, _.conditional)({\n  gce: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    byteSize: (0, _uint.readByte)()\n  }, {\n    extras: (0, _uint.readBits)({\n      future: {\n        index: 0,\n        length: 3\n      },\n      disposal: {\n        index: 3,\n        length: 3\n      },\n      userInput: {\n        index: 6\n      },\n      transparentColorGiven: {\n        index: 7\n      }\n    })\n  }, {\n    delay: (0, _uint.readUnsigned)(true)\n  }, {\n    transparentColorIndex: (0, _uint.readByte)()\n  }, {\n    terminator: (0, _uint.readByte)()\n  }]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xf9;\n}); // image pipeline block\n\nvar imageSchema = (0, _.conditional)({\n  image: [{\n    code: (0, _uint.readByte)()\n  }, {\n    descriptor: [{\n      left: (0, _uint.readUnsigned)(true)\n    }, {\n      top: (0, _uint.readUnsigned)(true)\n    }, {\n      width: (0, _uint.readUnsigned)(true)\n    }, {\n      height: (0, _uint.readUnsigned)(true)\n    }, {\n      lct: (0, _uint.readBits)({\n        exists: {\n          index: 0\n        },\n        interlaced: {\n          index: 1\n        },\n        sort: {\n          index: 2\n        },\n        future: {\n          index: 3,\n          length: 2\n        },\n        size: {\n          index: 5,\n          length: 3\n        }\n      })\n    }]\n  }, (0, _.conditional)({\n    lct: (0, _uint.readArray)(3, function (stream, result, parent) {\n      return Math.pow(2, parent.descriptor.lct.size + 1);\n    })\n  }, function (stream, result, parent) {\n    return parent.descriptor.lct.exists;\n  }), {\n    data: [{\n      minCodeSize: (0, _uint.readByte)()\n    }, subBlocksSchema]\n  }]\n}, function (stream) {\n  return (0, _uint.peekByte)()(stream) === 0x2c;\n}); // plain text block\n\nvar textSchema = (0, _.conditional)({\n  text: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    blockSize: (0, _uint.readByte)()\n  }, {\n    preData: function preData(stream, result, parent) {\n      return (0, _uint.readBytes)(parent.text.blockSize)(stream);\n    }\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0x01;\n}); // application block\n\nvar applicationSchema = (0, _.conditional)({\n  application: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    blockSize: (0, _uint.readByte)()\n  }, {\n    id: function id(stream, result, parent) {\n      return (0, _uint.readString)(parent.blockSize)(stream);\n    }\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xff;\n}); // comment block\n\nvar commentSchema = (0, _.conditional)({\n  comment: [{\n    codes: (0, _uint.readBytes)(2)\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xfe;\n});\nvar schema = [{\n  header: [{\n    signature: (0, _uint.readString)(3)\n  }, {\n    version: (0, _uint.readString)(3)\n  }]\n}, {\n  lsd: [{\n    width: (0, _uint.readUnsigned)(true)\n  }, {\n    height: (0, _uint.readUnsigned)(true)\n  }, {\n    gct: (0, _uint.readBits)({\n      exists: {\n        index: 0\n      },\n      resolution: {\n        index: 1,\n        length: 3\n      },\n      sort: {\n        index: 4\n      },\n      size: {\n        index: 5,\n        length: 3\n      }\n    })\n  }, {\n    backgroundColorIndex: (0, _uint.readByte)()\n  }, {\n    pixelAspectRatio: (0, _uint.readByte)()\n  }]\n}, (0, _.conditional)({\n  gct: (0, _uint.readArray)(3, function (stream, result) {\n    return Math.pow(2, result.lsd.gct.size + 1);\n  })\n}, function (stream, result) {\n  return result.lsd.gct.exists;\n}), // content frames\n{\n  frames: (0, _.loop)([gceSchema, applicationSchema, commentSchema, imageSchema, textSchema], function (stream) {\n    var nextCode = (0, _uint.peekByte)()(stream); // rather than check for a terminator, we should check for the existence\n    // of an ext or image block to avoid infinite loops\n    //var terminator = 0x3B;\n    //return nextCode !== terminator;\n\n    return nextCode === 0x21 || nextCode === 0x2c;\n  })\n}];\nvar _default = schema;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deinterlace = void 0;\n\n/**\r\n * Deinterlace function from https://github.com/shachaf/jsgif\r\n */\nvar deinterlace = function deinterlace(pixels, width) {\n  var newPixels = new Array(pixels.length);\n  var rows = pixels.length / width;\n\n  var cpRow = function cpRow(toRow, fromRow) {\n    var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n  }; // See appendix E.\n\n\n  var offsets = [0, 4, 2, 1];\n  var steps = [8, 8, 4, 2];\n  var fromRow = 0;\n\n  for (var pass = 0; pass < 4; pass++) {\n    for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n      cpRow(toRow, fromRow);\n      fromRow++;\n    }\n  }\n\n  return newPixels;\n};\n\nexports.deinterlace = deinterlace;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lzw = void 0;\n\n/**\r\n * javascript port of java LZW decompression\r\n * Original java author url: https://gist.github.com/devunwired/4479231\r\n */\nvar lzw = function lzw(minCodeSize, data, pixelCount) {\n  var MAX_STACK_SIZE = 4096;\n  var nullCode = -1;\n  var npix = pixelCount;\n  var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i, datum, data_size, first, top, bi, pi;\n  var dstPixels = new Array(pixelCount);\n  var prefix = new Array(MAX_STACK_SIZE);\n  var suffix = new Array(MAX_STACK_SIZE);\n  var pixelStack = new Array(MAX_STACK_SIZE + 1); // Initialize GIF data stream decoder.\n\n  data_size = minCodeSize;\n  clear = 1 << data_size;\n  end_of_information = clear + 1;\n  available = clear + 2;\n  old_code = nullCode;\n  code_size = data_size + 1;\n  code_mask = (1 << code_size) - 1;\n\n  for (code = 0; code < clear; code++) {\n    prefix[code] = 0;\n    suffix[code] = code;\n  } // Decode GIF pixel stream.\n\n\n  var datum, bits, count, first, top, pi, bi;\n  datum = bits = count = first = top = pi = bi = 0;\n\n  for (i = 0; i < npix;) {\n    if (top === 0) {\n      if (bits < code_size) {\n        // get the next byte\n        datum += data[bi] << bits;\n        bits += 8;\n        bi++;\n        continue;\n      } // Get the next code.\n\n\n      code = datum & code_mask;\n      datum >>= code_size;\n      bits -= code_size; // Interpret the code\n\n      if (code > available || code == end_of_information) {\n        break;\n      }\n\n      if (code == clear) {\n        // Reset decoder.\n        code_size = data_size + 1;\n        code_mask = (1 << code_size) - 1;\n        available = clear + 2;\n        old_code = nullCode;\n        continue;\n      }\n\n      if (old_code == nullCode) {\n        pixelStack[top++] = suffix[code];\n        old_code = code;\n        first = code;\n        continue;\n      }\n\n      in_code = code;\n\n      if (code == available) {\n        pixelStack[top++] = first;\n        code = old_code;\n      }\n\n      while (code > clear) {\n        pixelStack[top++] = suffix[code];\n        code = prefix[code];\n      }\n\n      first = suffix[code] & 0xff;\n      pixelStack[top++] = first; // add a new string to the table, but only if space is available\n      // if not, just continue with current table until a clear code is found\n      // (deferred clear code implementation as per GIF spec)\n\n      if (available < MAX_STACK_SIZE) {\n        prefix[available] = old_code;\n        suffix[available] = first;\n        available++;\n\n        if ((available & code_mask) === 0 && available < MAX_STACK_SIZE) {\n          code_size++;\n          code_mask += available;\n        }\n      }\n\n      old_code = in_code;\n    } // Pop a pixel off the pixel stack.\n\n\n    top--;\n    dstPixels[pi++] = pixelStack[top];\n    i++;\n  }\n\n  for (i = pi; i < npix; i++) {\n    dstPixels[i] = 0; // clear missing pixels\n  }\n\n  return dstPixels;\n};\n\nexports.lzw = lzw;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decompressFrames = exports.decompressFrame = exports.parseGIF = void 0;\n\nvar _gif = _interopRequireDefault(require(\"js-binary-schema-parser/lib/schemas/gif\"));\n\nvar _jsBinarySchemaParser = require(\"js-binary-schema-parser\");\n\nvar _uint = require(\"js-binary-schema-parser/lib/parsers/uint8\");\n\nvar _deinterlace = require(\"./deinterlace\");\n\nvar _lzw = require(\"./lzw\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar parseGIF = function parseGIF(arrayBuffer) {\n  var byteData = new Uint8Array(arrayBuffer);\n  return (0, _jsBinarySchemaParser.parse)((0, _uint.buildStream)(byteData), _gif[\"default\"]);\n};\n\nexports.parseGIF = parseGIF;\n\nvar generatePatch = function generatePatch(image) {\n  var totalPixels = image.pixels.length;\n  var patchData = new Uint8ClampedArray(totalPixels * 4);\n\n  for (var i = 0; i < totalPixels; i++) {\n    var pos = i * 4;\n    var colorIndex = image.pixels[i];\n    var color = image.colorTable[colorIndex] || [0, 0, 0];\n    patchData[pos] = color[0];\n    patchData[pos + 1] = color[1];\n    patchData[pos + 2] = color[2];\n    patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n  }\n\n  return patchData;\n};\n\nvar decompressFrame = function decompressFrame(frame, gct, buildImagePatch) {\n  if (!frame.image) {\n    console.warn('gif frame does not have associated image.');\n    return;\n  }\n\n  var image = frame.image; // get the number of pixels\n\n  var totalPixels = image.descriptor.width * image.descriptor.height; // do lzw decompression\n\n  var pixels = (0, _lzw.lzw)(image.data.minCodeSize, image.data.blocks, totalPixels); // deal with interlacing if necessary\n\n  if (image.descriptor.lct.interlaced) {\n    pixels = (0, _deinterlace.deinterlace)(pixels, image.descriptor.width);\n  }\n\n  var resultImage = {\n    pixels: pixels,\n    dims: {\n      top: frame.image.descriptor.top,\n      left: frame.image.descriptor.left,\n      width: frame.image.descriptor.width,\n      height: frame.image.descriptor.height\n    }\n  }; // color table\n\n  if (image.descriptor.lct && image.descriptor.lct.exists) {\n    resultImage.colorTable = image.lct;\n  } else {\n    resultImage.colorTable = gct;\n  } // add per frame relevant gce information\n\n\n  if (frame.gce) {\n    resultImage.delay = (frame.gce.delay || 10) * 10; // convert to ms\n\n    resultImage.disposalType = frame.gce.extras.disposal; // transparency\n\n    if (frame.gce.extras.transparentColorGiven) {\n      resultImage.transparentIndex = frame.gce.transparentColorIndex;\n    }\n  } // create canvas usable imagedata if desired\n\n\n  if (buildImagePatch) {\n    resultImage.patch = generatePatch(resultImage);\n  }\n\n  return resultImage;\n};\n\nexports.decompressFrame = decompressFrame;\n\nvar decompressFrames = function decompressFrames(parsedGif, buildImagePatches) {\n  return parsedGif.frames.filter(function (f) {\n    return f.image;\n  }).map(function (f) {\n    return decompressFrame(f, parsedGif.gct, buildImagePatches);\n  });\n};\n\nexports.decompressFrames = decompressFrames;","import React, { useReducer, useCallback, useEffect, useRef, useLayoutEffect, forwardRef } from 'react';\nimport { parseGIF, decompressFrames } from 'gifuct-js';\n\nconst reducer = (state, action = {}) => {\n  if (typeof action === \"function\") {\n    action = action(state);\n  }\n\n  const isLoadedChange = action.loaded && state.loaded !== action.loaded;\n  const {\n    playing,\n    ...rest\n  } = action;\n  const copy = { ...state,\n    ...rest\n  };\n\n  if (isLoadedChange) {\n    Object.assign(copy, {\n      playing: copy.autoPlay && copy.loaded\n    });\n  }\n\n  if (action.delays != null || action.frames != null) {\n    Object.assign(copy, {\n      length: copy.frames.length\n    });\n\n    if (process.env.NODE_ENV !== \"production\") {\n      if (copy.frames.length !== copy.delays.length) throw Error(\"frames and delays have different sizes\");\n    }\n  }\n\n  if (action.index != null || action.frames != null) {\n    Object.assign(copy, {\n      index: copy.length === 0 ? 0 : (copy.length + copy.index) % copy.length\n    });\n  }\n\n  if (action.playing != null) {\n    Object.assign(copy, copy.loaded ? {\n      playing\n    } : {\n      autoPlay: playing\n    });\n  }\n\n  return copy;\n};\n\nconst initializer = stateOrFn => reducer({\n  autoPlay: true,\n  playing: false,\n  frames: [],\n  delays: [],\n  index: 0,\n  length: 0,\n  loaded: false\n}, stateOrFn);\n\nconst usePlayerState = stateOrFn => {\n  return useReducer(reducer, stateOrFn, initializer);\n};\n\nvar code = \"function e(e){var r={exports:{}};return e(r,r.exports),r.exports}var r=e((function(e,r){Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.loop=r.conditional=r.parse=void 0;r.parse=function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(Array.isArray(t))t.forEach((function(t){return e(r,t,n,a)}));else if(\\\"function\\\"==typeof t)t(r,n,a,e);else{var i=Object.keys(t)[0];Array.isArray(t[i])?(a[i]={},e(r,t[i],n,a[i])):a[i]=t[i](r,n,a,e)}return n};r.conditional=function(e,r){return function(t,n,a,i){r(t,n,a)&&i(t,e,n,a)}};r.loop=function(e,r){return function(t,n,a,i){for(var o=[];r(t,n,a);){var s={};i(t,e,n,s),o.push(s)}return o}}})),t=e((function(e,r){Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.readBits=r.readArray=r.readUnsigned=r.readString=r.peekBytes=r.readBytes=r.peekByte=r.readByte=r.buildStream=void 0;r.buildStream=function(e){return{data:e,pos:0}};var t=function(){return function(e){return e.data[e.pos++]}};r.readByte=t;r.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(r){return r.data[r.pos+e]}};var n=function(e){return function(r){return r.data.subarray(r.pos,r.pos+=e)}};r.readBytes=n;r.peekBytes=function(e){return function(r){return r.data.subarray(r.pos,r.pos+e)}};r.readString=function(e){return function(r){return Array.from(n(e)(r)).map((function(e){return String.fromCharCode(e)})).join(\\\"\\\")}};r.readUnsigned=function(e){return function(r){var t=n(2)(r);return e?(t[1]<<8)+t[0]:(t[0]<<8)+t[1]}};r.readArray=function(e,r){return function(t,a,i){for(var o=\\\"function\\\"==typeof r?r(t,a,i):r,s=n(e),d=new Array(o),c=0;c<o;c++)d[c]=s(t);return d}};r.readBits=function(e){return function(r){for(var t=function(e){return e.data[e.pos++]}(r),n=new Array(8),a=0;a<8;a++)n[7-a]=!!(t&1<<a);return Object.keys(e).reduce((function(r,t){var a=e[t];return a.length?r[t]=function(e,r,t){for(var n=0,a=0;a<t;a++)n+=e[r+a]&&Math.pow(2,t-a-1);return n}(n,a.index,a.length):r[t]=n[a.index],r}),{})}}})),n=e((function(e,n){Object.defineProperty(n,\\\"__esModule\\\",{value:!0}),n.default=void 0;var a={blocks:function(e){for(var r=[],n=e.data.length,a=0,i=(0,t.readByte)()(e);0!==i;i=(0,t.readByte)()(e)){if(e.pos+i>=n){var o=n-e.pos;r.push((0,t.readBytes)(o)(e)),a+=o;break}r.push((0,t.readBytes)(i)(e)),a+=i}for(var s=new Uint8Array(a),d=0,c=0;c<r.length;c++)s.set(r[c],d),d+=r[c].length;return s}},i=(0,r.conditional)({gce:[{codes:(0,t.readBytes)(2)},{byteSize:(0,t.readByte)()},{extras:(0,t.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,t.readUnsigned)(!0)},{transparentColorIndex:(0,t.readByte)()},{terminator:(0,t.readByte)()}]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&249===r[1]})),o=(0,r.conditional)({image:[{code:(0,t.readByte)()},{descriptor:[{left:(0,t.readUnsigned)(!0)},{top:(0,t.readUnsigned)(!0)},{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{lct:(0,t.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,t.readArray)(3,(function(e,r,t){return Math.pow(2,t.descriptor.lct.size+1)}))},(function(e,r,t){return t.descriptor.lct.exists})),{data:[{minCodeSize:(0,t.readByte)()},a]}]},(function(e){return 44===(0,t.peekByte)()(e)})),s=(0,r.conditional)({text:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{preData:function(e,r,n){return(0,t.readBytes)(n.text.blockSize)(e)}},a]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&1===r[1]})),d=(0,r.conditional)({application:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{id:function(e,r,n){return(0,t.readString)(n.blockSize)(e)}},a]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&255===r[1]})),c=(0,r.conditional)({comment:[{codes:(0,t.readBytes)(2)},a]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&254===r[1]})),u=[{header:[{signature:(0,t.readString)(3)},{version:(0,t.readString)(3)}]},{lsd:[{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{gct:(0,t.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,t.readByte)()},{pixelAspectRatio:(0,t.readByte)()}]},(0,r.conditional)({gct:(0,t.readArray)(3,(function(e,r){return Math.pow(2,r.lsd.gct.size+1)}))},(function(e,r){return r.lsd.gct.exists})),{frames:(0,r.loop)([i,d,c,o,s],(function(e){var r=(0,t.peekByte)()(e);return 33===r||44===r}))}];n.default=u})),a=e((function(e,r){Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.deinterlace=void 0;r.deinterlace=function(e,r){for(var t=new Array(e.length),n=e.length/r,a=function(n,a){var i=e.slice(a*r,(a+1)*r);t.splice.apply(t,[n*r,r].concat(i))},i=[0,4,2,1],o=[8,8,4,2],s=0,d=0;d<4;d++)for(var c=i[d];c<n;c+=o[d])a(c,s),s++;return t}})),i=e((function(e,r){Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.lzw=void 0;r.lzw=function(e,r,t){var n,a,i,o,s,d,c,u,l,f,p,g,y,h,v,m,x=4096,B=t,w=new Array(t),b=new Array(x),k=new Array(x),A=new Array(4097);for(s=(a=1<<(f=e))+1,n=a+2,c=-1,i=(1<<(o=f+1))-1,u=0;u<a;u++)b[u]=0,k[u]=u;for(p=g=y=h=v=m=0,l=0;l<B;){if(0===h){if(g<o){p+=r[m]<<g,g+=8,m++;continue}if(u=p&i,p>>=o,g-=o,u>n||u==s)break;if(u==a){i=(1<<(o=f+1))-1,n=a+2,c=-1;continue}if(-1==c){A[h++]=k[u],c=u,y=u;continue}for(d=u,u==n&&(A[h++]=y,u=c);u>a;)A[h++]=k[u],u=b[u];y=255&k[u],A[h++]=y,n<x&&(b[n]=c,k[n]=y,0==(++n&i)&&n<x&&(o++,i+=n)),c=d}h--,w[v++]=A[h],l++}for(l=v;l<B;l++)w[l]=0;return w}})),o=e((function(e,o){Object.defineProperty(o,\\\"__esModule\\\",{value:!0}),o.decompressFrames=o.decompressFrame=o.parseGIF=void 0;var s,d=(s=n)&&s.__esModule?s:{default:s};o.parseGIF=function(e){var n=new Uint8Array(e);return(0,r.parse)((0,t.buildStream)(n),d.default)};var c=function(e,r,t){if(e.image){var n=e.image,o=n.descriptor.width*n.descriptor.height,s=(0,i.lzw)(n.data.minCodeSize,n.data.blocks,o);n.descriptor.lct.interlaced&&(s=(0,a.deinterlace)(s,n.descriptor.width));var d={pixels:s,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?d.colorTable=n.lct:d.colorTable=r,e.gce&&(d.delay=10*(e.gce.delay||10),d.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(d.transparentIndex=e.gce.transparentColorIndex)),t&&(d.patch=function(e){for(var r=e.pixels.length,t=new Uint8ClampedArray(4*r),n=0;n<r;n++){var a=4*n,i=e.pixels[n],o=e.colorTable[i]||[0,0,0];t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2],t[a+3]=i!==e.transparentIndex?255:0}return t}(d)),d}console.warn(\\\"gif frame does not have associated image.\\\")};o.decompressFrame=c;o.decompressFrames=function(e,r){return e.frames.filter((function(e){return e.image})).map((function(t){return c(t,e.gct,r)}))}}));const s=(e,r,t)=>{const{width:n,height:a,top:i,left:o}=r.dims,s=i*t.width+o;for(let i=0;i<a;i++)for(let a=0;a<n;a++){const o=i*n+a,d=r.pixels[o];if(d!==r.transparentIndex){const n=s+i*t.width+a,o=r.colorTable[d]||[0,0,0];e[4*n]=o[0],e[4*n+1]=o[1],e[4*n+2]=o[2],e[4*n+3]=255}}return e},d=new Map;self.addEventListener(\\\"message\\\",(e=>{const{type:r,src:t}=e.data||e;switch(r){case\\\"parse\\\":if(!d.has(t)){const e=new AbortController,r={signal:e.signal};d.set(t,e),((e,{signal:r})=>fetch(e,{signal:r}).then((e=>{if(!e.headers.get(\\\"Content-Type\\\").includes(\\\"image/gif\\\"))throw Error(`Wrong content type: \\\"${e.headers.get(\\\"Content-Type\\\")}\\\"`);return e.arrayBuffer()})).then((e=>o.parseGIF(e))).then((e=>((e=>{let r=null;for(const t of e.frames)r=t.gce?t.gce:r,\\\"image\\\"in t&&!(\\\"gce\\\"in t)&&(t.gce=r)})(e),e))).then((e=>Promise.all([o.decompressFrames(e,!1),{width:e.lsd.width,height:e.lsd.height}]))).then((([e,r])=>{const t=[],n=r.width*r.height*4;for(let a=0;a<e.length;++a){const i=e[a],o=0===a||2===e[a-1].disposalType?new Uint8ClampedArray(n):t[a-1].slice();t.push(s(o,i,r))}return{...r,loaded:!0,delays:e.map((e=>e.delay)),frames:t}})))(t,r).then((e=>{self.postMessage(Object.assign(e,{src:t}),e.frames.map((e=>e.buffer)))})).catch((e=>{self.postMessage({src:t,error:e,loaded:!0})})).finally((()=>{d.delete(t)}))}break;case\\\"cancel\\\":if(d.has(t)){d.get(t).abort(),d.delete(t)}}}));\\n\";\n\nfunction WorkerFactory(options) {\n  const blob = new Blob([code], {\n    type: 'application/javascript'\n  });\n  const url = URL.createObjectURL(blob);\n  const worker = new Worker(url, options);\n  URL.revokeObjectURL(url);\n  return worker;\n}\n\nconst validateAndFix = gif => {\n  let currentGce = null;\n\n  for (const frame of gif.frames) {\n    currentGce = frame.gce ? frame.gce : currentGce; // fix loosing graphic control extension for same frames\n\n    if (\"image\" in frame && !(\"gce\" in frame)) {\n      frame.gce = currentGce;\n    }\n  }\n};\n\nconst parse = (src, {\n  signal\n}) => fetch(src, {\n  signal\n}).then(resp => {\n  if (!resp.headers.get(\"Content-Type\").includes(\"image/gif\")) throw Error(`Wrong content type: \"${resp.headers.get(\"Content-Type\")}\"`);\n  return resp.arrayBuffer();\n}).then(buffer => parseGIF(buffer)).then(gif => {\n  validateAndFix(gif);\n  return gif;\n}).then(gif => Promise.all([decompressFrames(gif, false), {\n  width: gif.lsd.width,\n  height: gif.lsd.height\n}])).then(([frames, options]) => {\n  const readyFrames = [];\n  const size = options.width * options.height * 4;\n\n  for (let i = 0; i < frames.length; ++i) {\n    const frame = frames[i];\n    const typedArray = i === 0 || frames[i - 1].disposalType === 2 ? new Uint8ClampedArray(size) : readyFrames[i - 1].slice();\n    readyFrames.push(putPixels(typedArray, frame, options));\n  }\n\n  return { ...options,\n    loaded: true,\n    delays: frames.map(frame => frame.delay),\n    frames: readyFrames\n  };\n});\n\nconst putPixels = (typedArray, frame, gifSize) => {\n  const {\n    width,\n    height,\n    top: dy,\n    left: dx\n  } = frame.dims;\n  const offset = dy * gifSize.width + dx;\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const pPos = y * width + x;\n      const colorIndex = frame.pixels[pPos];\n\n      if (colorIndex !== frame.transparentIndex) {\n        const taPos = offset + y * gifSize.width + x;\n        const color = frame.colorTable[colorIndex] || [0, 0, 0];\n        typedArray[taPos * 4] = color[0];\n        typedArray[taPos * 4 + 1] = color[1];\n        typedArray[taPos * 4 + 2] = color[2];\n        typedArray[taPos * 4 + 3] = 255;\n      }\n    }\n  }\n\n  return typedArray;\n};\n\nconst genearate = info => {\n  return { ...info,\n    frames: info.frames.map(buffer => {\n      const image = new ImageData(info.width, info.height);\n      image.data.set(new Uint8ClampedArray(buffer));\n      return image;\n    })\n  };\n};\n\nconst createSingleton = (constructor, destructor) => {\n  const ref = {};\n  return () => {\n    if (!ref.instance) {\n      ref.instance = constructor();\n    }\n\n    useLayoutEffect(() => {\n      if (ref.timeout) {\n        clearTimeout(ref.timeout);\n        delete ref.timeout;\n      } else {\n        ref.usageCount = (ref.usageCount || 0) + 1;\n      }\n\n      return () => {\n        ref.timeout = setTimeout(() => {\n          ref.usageCount = ref.usageCount - 1;\n\n          if (ref.usageCount === 0) {\n            destructor && destructor(ref.instance);\n            delete ref.instance;\n            delete ref.timeout;\n          }\n        });\n      };\n    }, [ref, destructor]);\n    return ref.instance;\n  };\n};\n\nconst useUpdatedRef = value => {\n  const ref = useRef(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref;\n};\n\nconst useEventCallback = callback => {\n  const ref = useUpdatedRef(callback);\n  return useCallback(arg => ref.current && ref.current(arg), []);\n};\n\nconst useRaf = (callback, pause) => {\n  const cb = useEventCallback(callback);\n  useLayoutEffect(() => {\n    if (!pause) {\n      let id;\n      let prev = null;\n\n      const handleUpdate = () => {\n        id = requestAnimationFrame(now => {\n          const dt = now - (prev || now);\n          prev = now;\n          cb(dt);\n          handleUpdate();\n        });\n      };\n\n      handleUpdate();\n      return () => cancelAnimationFrame(id);\n    }\n  }, [pause, cb]);\n};\n\nconst useAsyncEffect = (fn, deps) => {\n  const cb = useEventCallback(fn);\n  useEffect(() => {\n    const controller = new AbortController();\n    const dest = cb(controller);\n    return () => {\n      controller.abort();\n      dest && dest();\n    };\n  }, [...deps]);\n};\n\nconst useParser = (src, callback) => {\n  const cb = useEventCallback(callback);\n  useAsyncEffect(controller => {\n    if (typeof src === \"string\") {\n      parse(src, {\n        signal: controller.signal\n      }).then(raw => genearate(raw)).then(info => cb(info)).catch(error => cb({\n        error,\n        loaded: true\n      }));\n    }\n  }, [src]);\n};\n\nconst useWorkerSingleton = /*#__PURE__*/createSingleton(() => new WorkerFactory(), worker => worker.terminate());\n\nconst useWorkerParser = (src, callback) => {\n  const cb = useEventCallback(callback);\n  const worker = useWorkerSingleton();\n  useEffect(() => {\n    if (typeof src === \"string\") {\n      const handler = e => {\n        const message = e.data || e;\n\n        if (message.src === src) {\n          const data = message.error ? message : genearate(message);\n          cb(data);\n        }\n      };\n\n      worker.addEventListener(\"message\", handler);\n      worker.postMessage({\n        src,\n        type: \"parse\"\n      });\n      return () => {\n        worker.postMessage({\n          src,\n          type: \"cancel\"\n        });\n        worker.removeEventListener(\"message\", handler);\n      };\n    }\n  }, [worker, src]);\n};\n\nconst usePlayback = (state, updater) => {\n  const delay = useRef(0);\n  useRaf(dt => {\n    const {\n      delays,\n      index: currentIndex\n    } = state;\n    delay.current += dt;\n\n    if (delay.current > delays[currentIndex]) {\n      delay.current = delay.current % delays[currentIndex];\n      updater();\n    }\n  }, !state.playing);\n};\n\nconst calcArgs = (fit, frameSize, canvasSize) => {\n  switch (fit) {\n    case \"fill\":\n      return [0, 0, frameSize.width, frameSize.height, 0, 0, canvasSize.width, canvasSize.height];\n\n    case \"contain\":\n      {\n        const ratio = Math.min(canvasSize.width / frameSize.width, canvasSize.height / frameSize.height);\n        const centerX = (canvasSize.width - frameSize.width * ratio) / 2;\n        const centerY = (canvasSize.height - frameSize.height * ratio) / 2;\n        return [0, 0, frameSize.width, frameSize.height, centerX, centerY, frameSize.width * ratio, frameSize.height * ratio];\n      }\n\n    case \"cover\":\n      {\n        const ratio = Math.max(canvasSize.width / frameSize.width, canvasSize.height / frameSize.height);\n        const centerX = (canvasSize.width - frameSize.width * ratio) / 2;\n        const centerY = (canvasSize.height - frameSize.height * ratio) / 2;\n        return [0, 0, frameSize.width, frameSize.height, centerX, centerY, frameSize.width * ratio, frameSize.height * ratio];\n      }\n\n    default:\n      return [0, 0];\n  }\n};\n\nconst combine = (...refs) => value => {\n  refs.forEach(ref => {\n    if (typeof ref === \"function\") {\n      ref(value);\n    } else if (ref != null) {\n      ref.current = value;\n    }\n  });\n};\n\nconst useCanvasSingleton = /*#__PURE__*/createSingleton(() => {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  canvas.width = 0;\n  canvas.height = 0;\n  return ctx;\n});\nconst Canvas = /*#__PURE__*/forwardRef(function Canvas({\n  index,\n  frames,\n  width,\n  height,\n  fit,\n  className,\n  style\n}, ref) {\n  const canvasRef = useRef();\n  const ctx = useRef();\n  const tempCtx = useCanvasSingleton();\n  useLayoutEffect(() => {\n    if (canvasRef.current) {\n      ctx.current = canvasRef.current.getContext(\"2d\");\n    }\n  }, [canvasRef]);\n  useLayoutEffect(() => {\n    if (canvasRef.current) {\n      canvasRef.current.width = width;\n      canvasRef.current.height = height;\n    }\n  }, [canvasRef, width, height]);\n  useEffect(() => {\n    const imageData = frames[index];\n\n    if (imageData) {\n      if (tempCtx.canvas.width < imageData.width || tempCtx.canvas.height < imageData.height) {\n        tempCtx.canvas.width = imageData.width;\n        tempCtx.canvas.height = imageData.height;\n      }\n\n      if (width > 0 && height > 0) {\n        ctx.current.clearRect(0, 0, width, height);\n        tempCtx.clearRect(0, 0, tempCtx.canvas.width, tempCtx.canvas.height);\n      }\n\n      tempCtx.putImageData(imageData, 0, 0);\n      ctx.current.drawImage(tempCtx.canvas, ...calcArgs(fit, imageData, {\n        width,\n        height\n      }));\n    }\n  }, [index, frames, width, height, fit]);\n  return /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: combine(canvasRef, ref),\n    className: className,\n    style: style\n  });\n});\n\nexport { Canvas, useParser, usePlayback, usePlayerState, useWorkerParser };\n","import * as React from \"react\";\nimport { AnimatedSprite as ReactPixiAnimatedSprite } from \"@pixi/react\";\nimport * as PIXI from \"pixi.js\";\n\ntype PixiAnimatedSpriteProps = {\n  forwardRef: any;\n  isPlaying: boolean;\n  images?: string[] | undefined;\n  initialFrame?: number | undefined;\n  scale?: number | [number, number];\n  x: number;\n  y: number;\n  width?: number;\n  height?: number;\n  anchor?: number;\n  rotation?: number;\n  alpha?: number;\n  animationSpeed?: number;\n  textures?: PIXI.Texture[] | undefined;\n  loop?: boolean;\n  onComplete?: () => void;\n  onFrameChange?: (currentFrame: number) => void;\n};\n\nconst PixiAnimatedSpriteComp = ({\n  isPlaying,\n  forwardRef,\n  ...props\n}: PixiAnimatedSpriteProps) => {\n  const animationSprite = React.useRef<any>(null);\n\n  React.useImperativeHandle(forwardRef, () => animationSprite.current!, [\n    animationSprite,\n  ]);\n\n  React.useEffect(() => {\n    if (animationSprite.current === null) return;\n    const sprite = animationSprite.current;\n    sprite[isPlaying ? \"gotoAndPlay\" : \"gotoAndStop\"](sprite.currentFrame);\n  }, [isPlaying]);\n\n  return (\n    <ReactPixiAnimatedSprite\n      ref={animationSprite}\n      {...props}\n      isPlaying={isPlaying}\n    />\n  );\n};\nconst PixiAnimatedSprite = React.memo(PixiAnimatedSpriteComp);\nexport default PixiAnimatedSprite;\n","import * as React from \"react\";\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\n// @ts-ignore\r\nimport map from \"lodash/map\";\r\nimport { GsapPixieContext } from \"../../providers/GsapPixieContextProvider\";\r\nimport { Container } from \"@pixi/react\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport gsap from \"gsap\";\r\nimport { useWorkerParser, usePlayerState } from \"@react-gifs/tools\";\r\nimport AbstractContainer from \"../../hocs/AbstractContainer\";\r\nimport { withFiltersHook } from \"../../hooks/withFiltersHook\";\r\n// @ts-ignore\r\nimport isEmpty from \"lodash/isEmpty\";\r\nimport { PixiAnimatedSprite } from \"../PixiAnimatedSprite\";\r\nimport {\r\n  PixiBaseSpriteProps,\r\n  ForwardedRefResponse,\r\n} from \"../../types/BaseProps\";\r\n\r\nexport interface PixiGifSpriteProps extends PixiBaseSpriteProps {\r\n  uniqueId: string;\r\n  src: string;\r\n  startAt: number;\r\n  endAt: number;\r\n  frameStartAt: number;\r\n  frameEndAt: number;\r\n  locked: boolean;\r\n  loop: boolean;\r\n}\r\n\r\ninterface GifState {\r\n  isPlaying: boolean;\r\n  progress: number;\r\n  speed: number;\r\n  isMuted: boolean;\r\n  isWaiting: boolean;\r\n  loaded: boolean;\r\n  size: { width: number; height: number };\r\n  isDragging: boolean;\r\n  totalFrames: number;\r\n  totalDuration: number;\r\n  currentFrame: number;\r\n}\r\n\r\nconst initialState: GifState = {\r\n  isPlaying: false,\r\n  progress: 0,\r\n  speed: 1,\r\n  isMuted: false,\r\n  isWaiting: false,\r\n  loaded: false,\r\n  size: { width: 50, height: 50 },\r\n  isDragging: false,\r\n  totalFrames: 0,\r\n  totalDuration: 0,\r\n  currentFrame: 0,\r\n};\r\n\r\n/**\r\n * PixiGifSprite Component is used to render gif image\r\n * @param props Gif Sprite props\r\n * @returns\r\n */\r\nconst PixiGifSprite = React.forwardRef<\r\n  ForwardedRefResponse | null,\r\n  PixiGifSpriteProps\r\n>((props, ref) => {\r\n  //// State\r\n  const [gifDuration, setGifDuration] = React.useState<number>(0);\r\n  const [gifFrameObject, setGifFrameObject] = React.useState<\r\n    PIXI.FrameObject[]\r\n  >([]);\r\n  const [, setIsComplete] = useState<boolean>(false);\r\n\r\n  //// Refs\r\n  const animatedSpriteRef = useRef<PIXI.AnimatedSprite>(null);\r\n  const containerRef = useRef<PIXI.Container>(null);\r\n  const gifStateRef = useRef<GifState>(initialState);\r\n  const tweenRef = useRef<gsap.core.Timeline>();\r\n\r\n  const [gifState, update] = usePlayerState({ autoPlay: false });\r\n\r\n  //// Context\r\n  const { tl } = useContext(GsapPixieContext);\r\n\r\n  const {\r\n    src,\r\n    uniqueId,\r\n    startAt,\r\n    endAt,\r\n    frameStartAt,\r\n    frameEndAt,\r\n    loop,\r\n    visible,\r\n    disabled,\r\n    transformation: { width = 0, height = 0, x, y, colorCorrection = {} },\r\n    pointerdown,\r\n  } = props;\r\n\r\n  // console.log(\"gifFrameV1 \" + uniqueId + \"\", gifFrames);\r\n  /// 1001\r\n  const { frames: gifFrames, delays: gifDelays } = gifState;\r\n  //  load and parse gif\r\n  useWorkerParser(src, update);\r\n\r\n  /// hooks\r\n  const {\r\n    temperatureFilter,\r\n    sharpnessFilter,\r\n    hueFilter,\r\n    blurFilter,\r\n    adjustmentFilter,\r\n    vignetteFilter,\r\n    noiseFilter,\r\n  } = withFiltersHook(colorCorrection);\r\n\r\n  const { blurRadius = 0, vignette = 0, noise = 0 } = colorCorrection;\r\n  const frameDelay = 0.1;\r\n\r\n  React.useEffect(() => {\r\n    if (!isEmpty(gifFrames)) {\r\n      // app.stage.addChild(frames);\r\n      /// load textues\r\n      const texturedFrames = map(gifFrames, (eachFrame: ImageData) => {\r\n        const { data, width, height } = eachFrame;\r\n        const dataEx = new Uint8Array(data);\r\n        return PIXI.Texture.fromBuffer(dataEx, width, height);\r\n      });\r\n\r\n      const frameObj = texturedFrames.map(\r\n        (eachFrame: PIXI.Texture, index: number) => {\r\n          return {\r\n            texture: eachFrame,\r\n            time: gifDelays[index],\r\n          };\r\n        }\r\n      );\r\n      setGifFrameObject(frameObj);\r\n      let duration = 0;\r\n      gifDelays.forEach((delay) => {\r\n        duration += delay;\r\n      });\r\n      setGifDuration(duration / 1000);\r\n      gifStateRef.current.totalDuration = duration;\r\n      gifStateRef.current.totalFrames = gifFrames.length;\r\n    }\r\n  }, [uniqueId, gifFrames, gifDelays]);\r\n\r\n  const onInterrupt = () => {\r\n    if (animatedSpriteRef.current) {\r\n      animatedSpriteRef.current.stop();\r\n      gifStateRef.current.isPlaying = false;\r\n    }\r\n  };\r\n\r\n  const onUpdate = () => {\r\n    if (animatedSpriteRef.current && tweenRef.current) {\r\n      const currentTime = tweenRef.current.time();\r\n      let frameNumber = currentTime === 0 ? 0 : currentTime / frameDelay;\r\n      frameNumber = isNaN(frameNumber) ? 0 : frameNumber;\r\n      const lastFrame = gifStateRef.current.totalFrames;\r\n      frameNumber = frameNumber > lastFrame ? lastFrame : frameNumber;\r\n      frameNumber = Math.round(frameNumber);\r\n      if (frameNumber >= lastFrame) {\r\n        animatedSpriteRef.current.gotoAndStop(0);\r\n        gifStateRef.current.isPlaying = false;\r\n      } else {\r\n        animatedSpriteRef.current.currentFrame = frameNumber;\r\n        // animatedSpriteRef.current.gotoAndPlay(frameNumber || 0);\r\n        gifStateRef.current.isPlaying = true;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleComplete = () => {\r\n    setIsComplete(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let ctx = gsap.context(() => {});\r\n    if (containerRef.current && tl.current && gifDuration > 0) {\r\n      const data = {\r\n        duration: Number(gifDuration),\r\n        onInterrupt: onInterrupt,\r\n        onUpdate: onUpdate,\r\n        onUpdateParams: [frameStartAt, frameEndAt],\r\n      };\r\n      const totalDuration = Number(endAt) - Number(startAt);\r\n      const maxRepeat = Math.max(\r\n        0,\r\n        Math.floor(totalDuration / gifDuration) - 1\r\n      );\r\n      // kill tween before adding it.\r\n      if (tweenRef.current) {\r\n        tweenRef.current.kill();\r\n      }\r\n      ctx = gsap.context(() => {\r\n        tweenRef.current = gsap\r\n          .timeline({ repeat: loop ? maxRepeat : 0, repeatDelay: 0 })\r\n          .from(\r\n            containerRef.current,\r\n            // @ts-ignore\r\n            data,\r\n            frameStartAt\r\n          );\r\n        tl.current.add(tweenRef.current, startAt);\r\n      });\r\n    }\r\n    return () => {\r\n      if (tweenRef.current) {\r\n        tweenRef.current.kill();\r\n        gsap.killTweensOf(tweenRef.current);\r\n      }\r\n      ctx.revert(); // cleanup!\r\n    };\r\n  }, [\r\n    src,\r\n    uniqueId,\r\n    startAt,\r\n    endAt,\r\n    frameStartAt,\r\n    frameEndAt,\r\n    gifDuration,\r\n    loop,\r\n  ]);\r\n\r\n  return (\r\n    <AbstractContainer\r\n      {...props}\r\n      ref={ref}\r\n      ignoreTlForVideo={true}\r\n      isGif={true}\r\n    >\r\n      <Container ref={containerRef}>\r\n        {!isEmpty(gifFrameObject) && (\r\n          <PixiAnimatedSprite\r\n            x={x}\r\n            y={y}\r\n            width={width}\r\n            height={height}\r\n            animationSpeed={1}\r\n            alpha={visible ? 1 : 0}\r\n            loop={loop}\r\n            // isPlaying={!!tlPlay}\r\n            // @ts-ignore\r\n            textures={gifFrameObject}\r\n            onComplete={handleComplete}\r\n            anchor={0.5}\r\n            forwardRef={animatedSpriteRef}\r\n            {...(!disabled &&\r\n              visible && { interactive: true, pointerdown: pointerdown })}\r\n            filters={[\r\n              temperatureFilter,\r\n              sharpnessFilter,\r\n              hueFilter,\r\n              adjustmentFilter,\r\n              // conditionally add blur filter\r\n              ...(blurRadius > 0 ? [blurFilter] : []),\r\n              // conditionally add vignette filter\r\n              ...(vignette > 0 ? [vignetteFilter] : []),\r\n              // conditionally add noise filter\r\n              ...(noise > 0 ? [noiseFilter] : []),\r\n            ]}\r\n          />\r\n        )}\r\n      </Container>\r\n    </AbstractContainer>\r\n  );\r\n});\r\n\r\nexport default PixiGifSprite;\r\n"],"names":["isArrayLike","require$$0","createBaseEach","eachFunc","fromRight","collection","iteratee","length","index","iterable","_createBaseEach","baseForOwn","require$$1","baseEach","_baseEach","baseMap","result","value","key","_baseMap","arrayMap","baseIteratee","require$$2","isArray","require$$3","map","func","map_1","lib","parse","stream","schema","parent","partSchema","conditional","conditionFunc","loop","continueFunc","arr","lastStreamPos","newParent","uint8","buildStream","uint8Data","readByte","peekByte","offset","readBytes","peekBytes","readString","readUnsigned","littleEndian","bytes","readArray","byteSize","totalOrFunc","total","parser","i","subBitsTotal","bits","startIndex","readBits","_byte","res","def","exports","_","_uint","subBlocksSchema","terminator","chunks","streamSize","size","availableSize","gceSchema","codes","imageSchema","textSchema","applicationSchema","commentSchema","nextCode","_default","deinterlace_1","deinterlace","pixels","width","newPixels","rows","cpRow","toRow","fromRow","fromPixels","offsets","steps","pass","lzw_1","lzw","minCodeSize","data","pixelCount","MAX_STACK_SIZE","nullCode","npix","available","clear","code_mask","code_size","end_of_information","in_code","old_code","code","datum","data_size","first","top","bi","pi","dstPixels","prefix","suffix","pixelStack","_gif","_interopRequireDefault","_jsBinarySchemaParser","_deinterlace","_lzw","require$$4","obj","parseGIF","arrayBuffer","byteData","generatePatch","image","totalPixels","patchData","pos","colorIndex","color","decompressFrame","frame","gct","buildImagePatch","resultImage","decompressFrames","parsedGif","buildImagePatches","f","reducer","state","action","isLoadedChange","playing","rest","copy","initializer","stateOrFn","usePlayerState","useReducer","WorkerFactory","options","blob","url","worker","genearate","info","buffer","createSingleton","constructor","destructor","ref","useLayoutEffect","useUpdatedRef","useRef","useEffect","useEventCallback","callback","useCallback","arg","useWorkerSingleton","useWorkerParser","src","cb","handler","e","message","PixiAnimatedSpriteComp","isPlaying","forwardRef","props","animationSprite","React.useRef","React.useImperativeHandle","React.useEffect","sprite","jsx","ReactPixiAnimatedSprite","PixiAnimatedSprite","React.memo","initialState","PixiGifSprite","React.forwardRef","gifDuration","setGifDuration","React.useState","gifFrameObject","setGifFrameObject","setIsComplete","useState","animatedSpriteRef","containerRef","gifStateRef","tweenRef","gifState","update","tl","useContext","GsapPixieContext","uniqueId","startAt","endAt","frameStartAt","frameEndAt","visible","disabled","height","x","y","colorCorrection","pointerdown","gifFrames","gifDelays","temperatureFilter","sharpnessFilter","hueFilter","blurFilter","adjustmentFilter","vignetteFilter","noiseFilter","withFiltersHook","blurRadius","vignette","noise","frameDelay","isEmpty","frameObj","eachFrame","width2","height2","dataEx","PIXI.Texture","duration","delay","onInterrupt","onUpdate","currentTime","frameNumber","lastFrame","handleComplete","ctx","gsap","totalDuration","maxRepeat","AbstractContainer","Container"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}