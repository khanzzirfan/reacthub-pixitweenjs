import{j as O}from"./jsx-runtime-4ca860c5.js";import{r as g}from"./index-61bf1805.js";import{g as ge}from"./_commonjsHelpers-de833af9.js";import{_ as ye,a as ve,b as he}from"./_baseForOwn-ca29a81b.js";import{c as N,d as be}from"./_getTag-2d69c746.js";import{m as W,G as xe,i as $,a as Be,g as q}from"./PixiStage-ce27c430.js";import{w as we,a as Ae}from"./withFiltersHook-489645a6.js";var Se=N;function ke(t,r){return function(e,n){if(e==null)return e;if(!Se(e))return t(e,n);for(var i=e.length,a=r?i:-1,u=Object(e);(r?a--:++a<i)&&n(u[a],a,u)!==!1;);return e}}var _e=ke,Ce=ye,Fe=_e,Pe=Fe(Ce),je=Pe,Ue=je,Me=N;function Ee(t,r){var e=-1,n=Me(t)?Array(t.length):[];return Ue(t,function(i,a,u){n[++e]=r(i,a,u)}),n}var ze=Ee,Ie=he,qe=ve,Oe=ze,Te=be;function Ve(t,r){var e=Te(t)?Ie:Oe;return e(t,qe(r))}var Ge=Ve;const Re=ge(Ge);var U={},H={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.loop=F.conditional=F.parse=void 0;var De=function t(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(Array.isArray(e))e.forEach(function(u){return t(r,u,n,i)});else if(typeof e=="function")e(r,n,i,t);else{var a=Object.keys(e)[0];Array.isArray(e[a])?(i[a]={},t(r,e[a],n,i[a])):i[a]=e[a](r,n,i,t)}return n};F.parse=De;var Le=function(r,e){return function(n,i,a,u){e(n,i,a)&&u(n,r,i,a)}};F.conditional=Le;var $e=function(r,e){return function(n,i,a,u){for(var o=[],l=n.pos;e(n,i,a);){var c={};if(u(n,r,i,c),n.pos===l)break;l=n.pos,o.push(c)}return o}};F.loop=$e;var y={};Object.defineProperty(y,"__esModule",{value:!0});y.readBits=y.readArray=y.readUnsigned=y.readString=y.peekBytes=y.readBytes=y.peekByte=y.readByte=y.buildStream=void 0;var Ne=function(r){return{data:r,pos:0}};y.buildStream=Ne;var K=function(){return function(r){return r.data[r.pos++]}};y.readByte=K;var We=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(e){return e.data[e.pos+r]}};y.peekByte=We;var T=function(r){return function(e){return e.data.subarray(e.pos,e.pos+=r)}};y.readBytes=T;var He=function(r){return function(e){return e.data.subarray(e.pos,e.pos+r)}};y.peekBytes=He;var Ke=function(r){return function(e){return Array.from(T(r)(e)).map(function(n){return String.fromCharCode(n)}).join("")}};y.readString=Ke;var Xe=function(r){return function(e){var n=T(2)(e);return r?(n[1]<<8)+n[0]:(n[0]<<8)+n[1]}};y.readUnsigned=Xe;var Ze=function(r,e){return function(n,i,a){for(var u=typeof e=="function"?e(n,i,a):e,o=T(r),l=new Array(u),c=0;c<u;c++)l[c]=o(n);return l}};y.readArray=Ze;var Je=function(r,e,n){for(var i=0,a=0;a<n;a++)i+=r[e+a]&&Math.pow(2,n-a-1);return i},Qe=function(r){return function(e){for(var n=K()(e),i=new Array(8),a=0;a<8;a++)i[7-a]=!!(n&1<<a);return Object.keys(r).reduce(function(u,o){var l=r[o];return l.length?u[o]=Je(i,l.index,l.length):u[o]=i[l.index],u},{})}};y.readBits=Qe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=F,e=y,n={blocks:function(s){for(var m=0,d=[],h=s.data.length,B=0,b=(0,e.readByte)()(s);b!==m&&b;b=(0,e.readByte)()(s)){if(s.pos+b>=h){var k=h-s.pos;d.push((0,e.readBytes)(k)(s)),B+=k;break}d.push((0,e.readBytes)(b)(s)),B+=b}for(var A=new Uint8Array(B),w=0,x=0;x<d.length;x++)A.set(d[x],w),w+=d[x].length;return A}},i=(0,r.conditional)({gce:[{codes:(0,e.readBytes)(2)},{byteSize:(0,e.readByte)()},{extras:(0,e.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,e.readUnsigned)(!0)},{transparentColorIndex:(0,e.readByte)()},{terminator:(0,e.readByte)()}]},function(p){var s=(0,e.peekBytes)(2)(p);return s[0]===33&&s[1]===249}),a=(0,r.conditional)({image:[{code:(0,e.readByte)()},{descriptor:[{left:(0,e.readUnsigned)(!0)},{top:(0,e.readUnsigned)(!0)},{width:(0,e.readUnsigned)(!0)},{height:(0,e.readUnsigned)(!0)},{lct:(0,e.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,e.readArray)(3,function(p,s,m){return Math.pow(2,m.descriptor.lct.size+1)})},function(p,s,m){return m.descriptor.lct.exists}),{data:[{minCodeSize:(0,e.readByte)()},n]}]},function(p){return(0,e.peekByte)()(p)===44}),u=(0,r.conditional)({text:[{codes:(0,e.readBytes)(2)},{blockSize:(0,e.readByte)()},{preData:function(s,m,d){return(0,e.readBytes)(d.text.blockSize)(s)}},n]},function(p){var s=(0,e.peekBytes)(2)(p);return s[0]===33&&s[1]===1}),o=(0,r.conditional)({application:[{codes:(0,e.readBytes)(2)},{blockSize:(0,e.readByte)()},{id:function(s,m,d){return(0,e.readString)(d.blockSize)(s)}},n]},function(p){var s=(0,e.peekBytes)(2)(p);return s[0]===33&&s[1]===255}),l=(0,r.conditional)({comment:[{codes:(0,e.readBytes)(2)},n]},function(p){var s=(0,e.peekBytes)(2)(p);return s[0]===33&&s[1]===254}),c=[{header:[{signature:(0,e.readString)(3)},{version:(0,e.readString)(3)}]},{lsd:[{width:(0,e.readUnsigned)(!0)},{height:(0,e.readUnsigned)(!0)},{gct:(0,e.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,e.readByte)()},{pixelAspectRatio:(0,e.readByte)()}]},(0,r.conditional)({gct:(0,e.readArray)(3,function(p,s){return Math.pow(2,s.lsd.gct.size+1)})},function(p,s){return s.lsd.gct.exists}),{frames:(0,r.loop)([i,o,l,a,u],function(p){var s=(0,e.peekByte)()(p);return s===33||s===44})}],f=c;t.default=f})(H);var V={};Object.defineProperty(V,"__esModule",{value:!0});V.deinterlace=void 0;var Ye=function(r,e){for(var n=new Array(r.length),i=r.length/e,a=function(s,m){var d=r.slice(m*e,(m+1)*e);n.splice.apply(n,[s*e,e].concat(d))},u=[0,4,2,1],o=[8,8,4,2],l=0,c=0;c<4;c++)for(var f=u[c];f<i;f+=o[c])a(f,l),l++;return n};V.deinterlace=Ye;var G={};Object.defineProperty(G,"__esModule",{value:!0});G.lzw=void 0;var er=function(r,e,n){var i=4096,a=-1,u=n,o,l,c,f,p,s,m,P,d,h,x,B,_,S,E,M,b=new Array(n),k=new Array(i),A=new Array(i),w=new Array(i+1);for(B=r,l=1<<B,p=l+1,o=l+2,m=a,f=B+1,c=(1<<f)-1,d=0;d<l;d++)k[d]=0,A[d]=d;var x,P,_,S,M,E;for(x=P=_=S=M=E=0,h=0;h<u;){if(S===0){if(P<f){x+=e[E]<<P,P+=8,E++;continue}if(d=x&c,x>>=f,P-=f,d>o||d==p)break;if(d==l){f=B+1,c=(1<<f)-1,o=l+2,m=a;continue}if(m==a){w[S++]=A[d],m=d,_=d;continue}for(s=d,d==o&&(w[S++]=_,d=m);d>l;)w[S++]=A[d],d=k[d];_=A[d]&255,w[S++]=_,o<i&&(k[o]=m,A[o]=_,o++,!(o&c)&&o<i&&(f++,c+=o)),m=s}S--,b[M++]=w[S],h++}for(h=M;h<u;h++)b[h]=0;return b};G.lzw=er;Object.defineProperty(U,"__esModule",{value:!0});U.decompressFrames=U.decompressFrame=U.parseGIF=void 0;var rr=or(H),tr=F,nr=y,ar=V,ir=G;function or(t){return t&&t.__esModule?t:{default:t}}var sr=function(r){var e=new Uint8Array(r);return(0,tr.parse)((0,nr.buildStream)(e),rr.default)};U.parseGIF=sr;var ur=function(r){for(var e=r.pixels.length,n=new Uint8ClampedArray(e*4),i=0;i<e;i++){var a=i*4,u=r.pixels[i],o=r.colorTable[u]||[0,0,0];n[a]=o[0],n[a+1]=o[1],n[a+2]=o[2],n[a+3]=u!==r.transparentIndex?255:0}return n},X=function(r,e,n){if(!r.image){console.warn("gif frame does not have associated image.");return}var i=r.image,a=i.descriptor.width*i.descriptor.height,u=(0,ir.lzw)(i.data.minCodeSize,i.data.blocks,a);i.descriptor.lct.interlaced&&(u=(0,ar.deinterlace)(u,i.descriptor.width));var o={pixels:u,dims:{top:r.image.descriptor.top,left:r.image.descriptor.left,width:r.image.descriptor.width,height:r.image.descriptor.height}};return i.descriptor.lct&&i.descriptor.lct.exists?o.colorTable=i.lct:o.colorTable=e,r.gce&&(o.delay=(r.gce.delay||10)*10,o.disposalType=r.gce.extras.disposal,r.gce.extras.transparentColorGiven&&(o.transparentIndex=r.gce.transparentColorIndex)),n&&(o.patch=ur(o)),o};U.decompressFrame=X;var dr=function(r,e){return r.frames.filter(function(n){return n.image}).map(function(n){return X(n,r.gct,e)})};U.decompressFrames=dr;const Z=(t,r={})=>{typeof r=="function"&&(r=r(t));const e=r.loaded&&t.loaded!==r.loaded,{playing:n,...i}=r,a={...t,...i};return e&&Object.assign(a,{playing:a.autoPlay&&a.loaded}),(r.delays!=null||r.frames!=null)&&Object.assign(a,{length:a.frames.length}),(r.index!=null||r.frames!=null)&&Object.assign(a,{index:a.length===0?0:(a.length+a.index)%a.length}),r.playing!=null&&Object.assign(a,a.loaded?{playing:n}:{autoPlay:n}),a},lr=t=>Z({autoPlay:!0,playing:!1,frames:[],delays:[],index:0,length:0,loaded:!1},t),cr=t=>g.useReducer(Z,t,lr);var fr='function e(e){var r={exports:{}};return e(r,r.exports),r.exports}var r=e((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.loop=r.conditional=r.parse=void 0;r.parse=function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(Array.isArray(t))t.forEach((function(t){return e(r,t,n,a)}));else if("function"==typeof t)t(r,n,a,e);else{var i=Object.keys(t)[0];Array.isArray(t[i])?(a[i]={},e(r,t[i],n,a[i])):a[i]=t[i](r,n,a,e)}return n};r.conditional=function(e,r){return function(t,n,a,i){r(t,n,a)&&i(t,e,n,a)}};r.loop=function(e,r){return function(t,n,a,i){for(var o=[];r(t,n,a);){var s={};i(t,e,n,s),o.push(s)}return o}}})),t=e((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.readBits=r.readArray=r.readUnsigned=r.readString=r.peekBytes=r.readBytes=r.peekByte=r.readByte=r.buildStream=void 0;r.buildStream=function(e){return{data:e,pos:0}};var t=function(){return function(e){return e.data[e.pos++]}};r.readByte=t;r.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(r){return r.data[r.pos+e]}};var n=function(e){return function(r){return r.data.subarray(r.pos,r.pos+=e)}};r.readBytes=n;r.peekBytes=function(e){return function(r){return r.data.subarray(r.pos,r.pos+e)}};r.readString=function(e){return function(r){return Array.from(n(e)(r)).map((function(e){return String.fromCharCode(e)})).join("")}};r.readUnsigned=function(e){return function(r){var t=n(2)(r);return e?(t[1]<<8)+t[0]:(t[0]<<8)+t[1]}};r.readArray=function(e,r){return function(t,a,i){for(var o="function"==typeof r?r(t,a,i):r,s=n(e),d=new Array(o),c=0;c<o;c++)d[c]=s(t);return d}};r.readBits=function(e){return function(r){for(var t=function(e){return e.data[e.pos++]}(r),n=new Array(8),a=0;a<8;a++)n[7-a]=!!(t&1<<a);return Object.keys(e).reduce((function(r,t){var a=e[t];return a.length?r[t]=function(e,r,t){for(var n=0,a=0;a<t;a++)n+=e[r+a]&&Math.pow(2,t-a-1);return n}(n,a.index,a.length):r[t]=n[a.index],r}),{})}}})),n=e((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={blocks:function(e){for(var r=[],n=e.data.length,a=0,i=(0,t.readByte)()(e);0!==i;i=(0,t.readByte)()(e)){if(e.pos+i>=n){var o=n-e.pos;r.push((0,t.readBytes)(o)(e)),a+=o;break}r.push((0,t.readBytes)(i)(e)),a+=i}for(var s=new Uint8Array(a),d=0,c=0;c<r.length;c++)s.set(r[c],d),d+=r[c].length;return s}},i=(0,r.conditional)({gce:[{codes:(0,t.readBytes)(2)},{byteSize:(0,t.readByte)()},{extras:(0,t.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,t.readUnsigned)(!0)},{transparentColorIndex:(0,t.readByte)()},{terminator:(0,t.readByte)()}]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&249===r[1]})),o=(0,r.conditional)({image:[{code:(0,t.readByte)()},{descriptor:[{left:(0,t.readUnsigned)(!0)},{top:(0,t.readUnsigned)(!0)},{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{lct:(0,t.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,t.readArray)(3,(function(e,r,t){return Math.pow(2,t.descriptor.lct.size+1)}))},(function(e,r,t){return t.descriptor.lct.exists})),{data:[{minCodeSize:(0,t.readByte)()},a]}]},(function(e){return 44===(0,t.peekByte)()(e)})),s=(0,r.conditional)({text:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{preData:function(e,r,n){return(0,t.readBytes)(n.text.blockSize)(e)}},a]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&1===r[1]})),d=(0,r.conditional)({application:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{id:function(e,r,n){return(0,t.readString)(n.blockSize)(e)}},a]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&255===r[1]})),c=(0,r.conditional)({comment:[{codes:(0,t.readBytes)(2)},a]},(function(e){var r=(0,t.peekBytes)(2)(e);return 33===r[0]&&254===r[1]})),u=[{header:[{signature:(0,t.readString)(3)},{version:(0,t.readString)(3)}]},{lsd:[{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{gct:(0,t.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,t.readByte)()},{pixelAspectRatio:(0,t.readByte)()}]},(0,r.conditional)({gct:(0,t.readArray)(3,(function(e,r){return Math.pow(2,r.lsd.gct.size+1)}))},(function(e,r){return r.lsd.gct.exists})),{frames:(0,r.loop)([i,d,c,o,s],(function(e){var r=(0,t.peekByte)()(e);return 33===r||44===r}))}];n.default=u})),a=e((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deinterlace=void 0;r.deinterlace=function(e,r){for(var t=new Array(e.length),n=e.length/r,a=function(n,a){var i=e.slice(a*r,(a+1)*r);t.splice.apply(t,[n*r,r].concat(i))},i=[0,4,2,1],o=[8,8,4,2],s=0,d=0;d<4;d++)for(var c=i[d];c<n;c+=o[d])a(c,s),s++;return t}})),i=e((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.lzw=void 0;r.lzw=function(e,r,t){var n,a,i,o,s,d,c,u,l,f,p,g,y,h,v,m,x=4096,B=t,w=new Array(t),b=new Array(x),k=new Array(x),A=new Array(4097);for(s=(a=1<<(f=e))+1,n=a+2,c=-1,i=(1<<(o=f+1))-1,u=0;u<a;u++)b[u]=0,k[u]=u;for(p=g=y=h=v=m=0,l=0;l<B;){if(0===h){if(g<o){p+=r[m]<<g,g+=8,m++;continue}if(u=p&i,p>>=o,g-=o,u>n||u==s)break;if(u==a){i=(1<<(o=f+1))-1,n=a+2,c=-1;continue}if(-1==c){A[h++]=k[u],c=u,y=u;continue}for(d=u,u==n&&(A[h++]=y,u=c);u>a;)A[h++]=k[u],u=b[u];y=255&k[u],A[h++]=y,n<x&&(b[n]=c,k[n]=y,0==(++n&i)&&n<x&&(o++,i+=n)),c=d}h--,w[v++]=A[h],l++}for(l=v;l<B;l++)w[l]=0;return w}})),o=e((function(e,o){Object.defineProperty(o,"__esModule",{value:!0}),o.decompressFrames=o.decompressFrame=o.parseGIF=void 0;var s,d=(s=n)&&s.__esModule?s:{default:s};o.parseGIF=function(e){var n=new Uint8Array(e);return(0,r.parse)((0,t.buildStream)(n),d.default)};var c=function(e,r,t){if(e.image){var n=e.image,o=n.descriptor.width*n.descriptor.height,s=(0,i.lzw)(n.data.minCodeSize,n.data.blocks,o);n.descriptor.lct.interlaced&&(s=(0,a.deinterlace)(s,n.descriptor.width));var d={pixels:s,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?d.colorTable=n.lct:d.colorTable=r,e.gce&&(d.delay=10*(e.gce.delay||10),d.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(d.transparentIndex=e.gce.transparentColorIndex)),t&&(d.patch=function(e){for(var r=e.pixels.length,t=new Uint8ClampedArray(4*r),n=0;n<r;n++){var a=4*n,i=e.pixels[n],o=e.colorTable[i]||[0,0,0];t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2],t[a+3]=i!==e.transparentIndex?255:0}return t}(d)),d}console.warn("gif frame does not have associated image.")};o.decompressFrame=c;o.decompressFrames=function(e,r){return e.frames.filter((function(e){return e.image})).map((function(t){return c(t,e.gct,r)}))}}));const s=(e,r,t)=>{const{width:n,height:a,top:i,left:o}=r.dims,s=i*t.width+o;for(let i=0;i<a;i++)for(let a=0;a<n;a++){const o=i*n+a,d=r.pixels[o];if(d!==r.transparentIndex){const n=s+i*t.width+a,o=r.colorTable[d]||[0,0,0];e[4*n]=o[0],e[4*n+1]=o[1],e[4*n+2]=o[2],e[4*n+3]=255}}return e},d=new Map;self.addEventListener("message",(e=>{const{type:r,src:t}=e.data||e;switch(r){case"parse":if(!d.has(t)){const e=new AbortController,r={signal:e.signal};d.set(t,e),((e,{signal:r})=>fetch(e,{signal:r}).then((e=>{if(!e.headers.get("Content-Type").includes("image/gif"))throw Error(`Wrong content type: "${e.headers.get("Content-Type")}"`);return e.arrayBuffer()})).then((e=>o.parseGIF(e))).then((e=>((e=>{let r=null;for(const t of e.frames)r=t.gce?t.gce:r,"image"in t&&!("gce"in t)&&(t.gce=r)})(e),e))).then((e=>Promise.all([o.decompressFrames(e,!1),{width:e.lsd.width,height:e.lsd.height}]))).then((([e,r])=>{const t=[],n=r.width*r.height*4;for(let a=0;a<e.length;++a){const i=e[a],o=0===a||2===e[a-1].disposalType?new Uint8ClampedArray(n):t[a-1].slice();t.push(s(o,i,r))}return{...r,loaded:!0,delays:e.map((e=>e.delay)),frames:t}})))(t,r).then((e=>{self.postMessage(Object.assign(e,{src:t}),e.frames.map((e=>e.buffer)))})).catch((e=>{self.postMessage({src:t,error:e,loaded:!0})})).finally((()=>{d.delete(t)}))}break;case"cancel":if(d.has(t)){d.get(t).abort(),d.delete(t)}}}));\n';function pr(t){const r=new Blob([fr],{type:"application/javascript"}),e=URL.createObjectURL(r),n=new Worker(e,t);return URL.revokeObjectURL(e),n}const mr=t=>({...t,frames:t.frames.map(r=>{const e=new ImageData(t.width,t.height);return e.data.set(new Uint8ClampedArray(r)),e})}),gr=(t,r)=>{const e={};return()=>(e.instance||(e.instance=t()),g.useLayoutEffect(()=>(e.timeout?(clearTimeout(e.timeout),delete e.timeout):e.usageCount=(e.usageCount||0)+1,()=>{e.timeout=setTimeout(()=>{e.usageCount=e.usageCount-1,e.usageCount===0&&(r&&r(e.instance),delete e.instance,delete e.timeout)})}),[e,r]),e.instance)},yr=t=>{const r=g.useRef(t);return g.useEffect(()=>{r.current=t},[t]),r},vr=t=>{const r=yr(t);return g.useCallback(e=>r.current&&r.current(e),[])},hr=gr(()=>new pr,t=>t.terminate()),br=(t,r)=>{const e=vr(r),n=hr();g.useEffect(()=>{if(typeof t=="string"){const i=a=>{const u=a.data||a;if(u.src===t){const o=u.error?u:mr(u);e(o)}};return n.addEventListener("message",i),n.postMessage({src:t,type:"parse"}),()=>{n.postMessage({src:t,type:"cancel"}),n.removeEventListener("message",i)}}},[n,t])},xr=({isPlaying:t,forwardRef:r,...e})=>{const n=g.useRef(null);return g.useImperativeHandle(r,()=>n.current,[n]),g.useEffect(()=>{if(n.current===null)return;const i=n.current;i[t?"gotoAndPlay":"gotoAndStop"](i.currentFrame)},[t]),O.jsx(W.AnimatedSprite,{ref:n,...e,isPlaying:t})},Br=g.memo(xr),wr={isPlaying:!1,progress:0,speed:1,isMuted:!1,isWaiting:!1,loaded:!1,size:{width:50,height:50},isDragging:!1,totalFrames:0,totalDuration:0,currentFrame:0},jr=g.forwardRef((t,r)=>{const[e,n]=g.useState(0),[i,a]=g.useState([]),[,u]=g.useState(!1),o=g.useRef(null),l=g.useRef(null),c=g.useRef(wr),f=g.useRef(),[p,s]=cr({autoPlay:!1}),{tl:m}=g.useContext(xe),{src:d,uniqueId:h,startAt:B,endAt:b,frameStartAt:k,frameEndAt:A,loop:w,visible:x,disabled:P,transformation:{width:_=0,height:S=0,x:M,y:E,colorCorrection:L={}},pointerdown:J}=t,{frames:I,delays:R}=p;br(d,s);const{temperatureFilter:Q,sharpnessFilter:Y,hueFilter:ee,blurFilter:re,adjustmentFilter:te,vignetteFilter:ne,noiseFilter:ae}=we(L),{blurRadius:ie=0,vignette:oe=0,noise:se=0}=L,ue=.1;g.useEffect(()=>{if(!$(I)){const v=Re(I,j=>{const{data:D,width:fe,height:pe}=j,me=new Uint8Array(D);return Be.fromBuffer(me,fe,pe)}).map((j,D)=>({texture:j,time:R[D]}));a(v);let C=0;R.forEach(j=>{C+=j}),n(C/1e3),c.current.totalDuration=C,c.current.totalFrames=I.length}},[h,I,R]);const de=()=>{o.current&&(o.current.stop(),c.current.isPlaying=!1)},le=()=>{if(o.current&&f.current){const z=f.current.time();let v=z===0?0:z/ue;v=isNaN(v)?0:v;const C=c.current.totalFrames;v=v>C?C:v,v=Math.round(v),v>=C?(o.current.gotoAndStop(0),c.current.isPlaying=!1):(o.current.currentFrame=v,c.current.isPlaying=!0)}},ce=()=>{u(!0)};return g.useEffect(()=>{let z=q.context(()=>{});if(l.current&&m.current&&e>0){const v={duration:Number(e),onInterrupt:de,onUpdate:le,onUpdateParams:[k,A]},C=Number(b)-Number(B),j=Math.max(0,Math.floor(C/e)-1);f.current&&f.current.kill(),z=q.context(()=>{f.current=q.timeline({repeat:w?j:0,repeatDelay:0}).from(l.current,v,k),m.current.add(f.current,B)})}return()=>{f.current&&(f.current.kill(),q.killTweensOf(f.current)),z.revert()}},[d,h,B,b,k,A,e,w]),O.jsx(Ae,{...t,ref:r,ignoreTlForVideo:!0,isGif:!0,children:O.jsx(W.Container,{ref:l,children:!$(i)&&O.jsx(Br,{x:M,y:E,width:_,height:S,animationSpeed:1,alpha:x?1:0,loop:w,textures:i,onComplete:ce,anchor:.5,forwardRef:o,...!P&&x&&{interactive:!0,pointerdown:J},filters:[Q,Y,ee,te,...ie>0?[re]:[],...oe>0?[ne]:[],...se>0?[ae]:[]]})})})});try{PixiGifGsapSync.displayName="PixiGifGsapSync",PixiGifGsapSync.__docgenInfo={description:"PixiGifSprite Component is used to render gif image",displayName:"PixiGifGsapSync",props:{uniqueId:{defaultValue:null,description:"",name:"uniqueId",required:!0,type:{name:"string"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},startAt:{defaultValue:null,description:"",name:"startAt",required:!0,type:{name:"number"}},endAt:{defaultValue:null,description:"",name:"endAt",required:!0,type:{name:"number"}},frameStartAt:{defaultValue:null,description:"",name:"frameStartAt",required:!0,type:{name:"number"}},frameEndAt:{defaultValue:null,description:"",name:"frameEndAt",required:!0,type:{name:"number"}},locked:{defaultValue:null,description:"",name:"locked",required:!0,type:{name:"boolean"}},loop:{defaultValue:null,description:"",name:"loop",required:!0,type:{name:"boolean"}},path:{defaultValue:null,description:"",name:"path",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},isDragging:{defaultValue:null,description:"",name:"isDragging",required:!1,type:{name:"boolean"}},transformation:{defaultValue:null,description:"",name:"transformation",required:!0,type:{name:"{ x: number; y: number; width: number; height: number; anchor: number; rotation?: number | undefined; alpha?: number | undefined; scale?: number | [number, number] | undefined; tint?: number | undefined; ... 4 more ...; overlay?: OverlayTypes | undefined; }"}},pointerdown:{defaultValue:null,description:"",name:"pointerdown",required:!1,type:{name:"(() => void)"}},pointerup:{defaultValue:null,description:"",name:"pointerup",required:!1,type:{name:"(() => void)"}},pointerout:{defaultValue:null,description:"",name:"pointerout",required:!1,type:{name:"(() => void)"}},mousedown:{defaultValue:null,description:"",name:"mousedown",required:!1,type:{name:"(() => void)"}},mouseup:{defaultValue:null,description:"",name:"mouseup",required:!1,type:{name:"(() => void)"}},pointerover:{defaultValue:null,description:"",name:"pointerover",required:!1,type:{name:"(() => void)"}},mouseover:{defaultValue:null,description:"",name:"mouseover",required:!1,type:{name:"(() => void)"}},mouseout:{defaultValue:null,description:"",name:"mouseout",required:!1,type:{name:"(() => void)"}},applyTransformer:{defaultValue:null,description:"",name:"applyTransformer",required:!1,type:{name:"boolean"}},onAnchorTransformationEnd:{defaultValue:null,description:"",name:"onAnchorTransformationEnd",required:!1,type:{name:"((endData: any) => void)"}},fps:{defaultValue:null,description:"",name:"fps",required:!1,type:{name:"number"}}}}}catch{}export{jr as P};
//# sourceMappingURL=PixiGifGsapSync-10c2dc73.js.map
